import{S as m,i as d,s as h,e as f,t as u,c as _,a as g,h as b,d as i,b as p,g as y,G as k,H as n,$ as w,v as x}from"../../../chunks/vendor-57c42864.js";import{p as C}from"../../../chunks/stores-4d2a3a4d.js";import{l as S,b as T}from"../../../chunks/Config-780b23b7.js";import{g as v}from"../../../chunks/TempoLogin-35b0e673.js";import"../../../chunks/Defaults-9df7d6c8.js";function $(s){let t,o;return{c(){t=f("a"),o=u("Go to application"),this.h()},l(e){t=_(e,"A",{href:!0,class:!0});var a=g(t);o=b(a,"Go to application"),a.forEach(i),this.h()},h(){p(t,"href","/"),p(t,"class","button is-primary")},m(e,a){y(e,t,a),k(t,o)},p:n,i:n,o:n,d(e){e&&i(t)}}}function G(s,t,o){let e;return w(s,C,a=>o(0,e=a)),x(async()=>{const a=e.url.searchParams.get("code"),r=S(),l={grant_type:"authorization_code",client_id:r.tempo.clientId,client_secret:r.tempo.clientSecret,code:a,redirect_uri:v()},c=await(await fetch("https://api.tempo.io/oauth/token/",{method:"POST",body:new URLSearchParams(l),headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();T(c.access_token,c.refresh_token)}),[]}class E extends m{constructor(t){super();d(this,t,G,$,h,{})}}export{E as default};
