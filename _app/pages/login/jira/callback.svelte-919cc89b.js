import{S as h,i as d,s as m,e as f,t as u,c as _,a as g,h as y,d as c,b as l,g as b,G as k,H as n,$ as j,v as x}from"../../../chunks/vendor-57c42864.js";import{p as C}from"../../../chunks/stores-4d2a3a4d.js";import{l as S,s as v}from"../../../chunks/Config-780b23b7.js";import{g as $}from"../../../chunks/JiraLogin-78882b5f.js";import"../../../chunks/Defaults-9df7d6c8.js";function G(o){let t,s;return{c(){t=f("a"),s=u("Go to application"),this.h()},l(a){t=_(a,"A",{href:!0,class:!0});var e=g(t);s=y(e,"Go to application"),e.forEach(c),this.h()},h(){l(t,"href","/"),l(t,"class","button is-primary")},m(a,e){b(a,t,e),k(t,s)},p:n,i:n,o:n,d(a){a&&c(t)}}}function J(o,t,s){let a;return j(o,C,e=>s(0,a=e)),x(async()=>{const e=a.url.searchParams.get("code"),r=S(),p={grant_type:"authorization_code",client_id:r.jira.clientId,client_secret:r.jira.clientSecret,code:e,redirect_uri:$()},i=await(await fetch("https://auth.atlassian.com/oauth/token",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json"}})).json();v(i.access_token,i.refresh_token)}),[]}class A extends h{constructor(t){super();d(this,t,J,G,m,{})}}export{A as default};
