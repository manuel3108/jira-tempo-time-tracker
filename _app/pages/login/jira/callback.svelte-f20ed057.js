import{$ as u,S as d,i as g,s as b,e as h,t as _,c as m,a as f,h as v,d as c,b as p,g as y,G as k,H as o,a0 as x,v as C}from"../../../chunks/vendor-661df032.js";import{l as S,s as j}from"../../../chunks/Config-d6436c72.js";import{g as $}from"../../../chunks/JiraLogin-78882b5f.js";import"../../../chunks/Defaults-2a83e164.js";const G=()=>{const t=u("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session,updated:t.updated}},J={subscribe(t){return G().page.subscribe(t)}};function T(t){let e,n;return{c(){e=h("a"),n=_("Go to application"),this.h()},l(s){e=m(s,"A",{href:!0,class:!0});var a=f(e);n=v(a,"Go to application"),a.forEach(c),this.h()},h(){p(e,"href","/"),p(e,"class","button is-primary")},m(s,a){y(s,e,a),k(e,n)},p:o,i:o,o,d(s){s&&c(e)}}}function w(t,e,n){let s;return x(t,J,a=>n(0,s=a)),C(async()=>{const a=s.url.searchParams.get("code"),r=S(),l={grant_type:"authorization_code",client_id:r.jira.clientId,client_secret:r.jira.clientSecret,code:a,redirect_uri:$()},i=await(await fetch("https://auth.atlassian.com/oauth/token",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}})).json();j(i.access_token,i.refresh_token)}),[]}class E extends d{constructor(e){super();g(this,e,w,T,b,{})}}export{E as default};
